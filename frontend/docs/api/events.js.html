<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: events.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: events.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ëª¨ë“ˆ (Events)
 * 
 * Freshdesk Custom App - Prompt Canvas
 * ì´ íŒŒì¼ì€ app.jsì—ì„œ ë¶„ë¦¬ëœ ëª¨ë“  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ ê´€ë ¨ í•¨ìˆ˜ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.
 * 
 * ì£¼ìš” ê¸°ëŠ¥:
 * - í”„ë¡¬í”„íŠ¸ ì „ì†¡ ë° ì‘ë‹µ ì²˜ë¦¬ ì´ë²¤íŠ¸
 * - ëª¨ë‹¬ ì°½ ì—´ê¸°/ë‹«ê¸° ì´ë²¤íŠ¸ 
 * - í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (Enter) ì´ë²¤íŠ¸
 * - ë²„íŠ¼ ìƒíƒœ ê´€ë¦¬ ë° UI í”¼ë“œë°±
 * - ì—ëŸ¬ ì²˜ë¦¬ ë° ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
 * 
 * ì˜ì¡´ì„±:
 * - GlobalState: ì „ì—­ ìƒíƒœ ë° ì—ëŸ¬ í•¸ë“¤ëŸ¬
 * - UI: UI ì¡°ì‘ ë° í”¼ë“œë°± í‘œì‹œ
 * - Data: ë°ì´í„° ì²˜ë¦¬ ë° API í˜¸ì¶œ
 * 
 * @namespace Events
 * @author Freshdesk Custom App Team
 * @since 1.0.0
 */

/**
 * ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ê´€ë ¨ í•¨ìˆ˜ë“¤
 * Freshdesk Custom App - Prompt Canvas
 * 
 * ì´ íŒŒì¼ì€ app.jsì—ì„œ ë¶„ë¦¬ëœ ëª¨ë“  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ ê´€ë ¨ í•¨ìˆ˜ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.
 * íƒ­ ì´ë²¤íŠ¸, ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸, í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ë“±ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
 */

// Events ëª¨ë“ˆ ì •ì˜ - ëª¨ë“  ì´ë²¤íŠ¸ ê´€ë ¨ í•¨ìˆ˜ë¥¼ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ê´€ë¦¬
window.Events = {
  /**
   * í”„ë¡¬í”„íŠ¸ ì „ì†¡ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
   * 
   * ì‚¬ìš©ìê°€ ì…ë ¥í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ê³  ì‘ë‹µì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
   * UI ìƒíƒœ ê´€ë¦¬, ì—ëŸ¬ ì²˜ë¦¬, ì‚¬ìš©ì í”¼ë“œë°±ì„ í¬í•¨í•©ë‹ˆë‹¤.
   * 
   * @param {Event} event - ì´ë²¤íŠ¸ ê°ì²´ (submit ë˜ëŠ” click ì´ë²¤íŠ¸)
   * @returns {Promise&lt;void>} ë¹„ë™ê¸° ì²˜ë¦¬ ì™„ë£Œ
   * 
   * @example
   * // ë²„íŠ¼ í´ë¦­ ì‹œ ì§ì ‘ í˜¸ì¶œ
   * Events.handleSendPrompt(clickEvent);
   * 
   * // Enter í‚¤ ì²˜ë¦¬ ì‹œ í˜¸ì¶œ
   * Events.handleSendPrompt(keyEvent);
   */
  async handleSendPrompt(event) {
    try {
      if (event) {
        event.preventDefault();
      }
      
      console.log('[EVENTS] í”„ë¡¬í”„íŠ¸ ì „ì†¡ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì‹œì‘');
      
      const promptInput = UI.safeGetElement('#prompt-input');
      if (!promptInput) {
        throw new Error('í”„ë¡¬í”„íŠ¸ ì…ë ¥ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      }

      const prompt = promptInput.value?.trim();
      if (!prompt) {
        UI.showToast('í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning');
        return;
      }

      // UI ë¹„í™œì„±í™”
      this.setSubmitButtonState(false);
      UI.showToast('ì²˜ë¦¬ ì¤‘...', 'info');

      try {
        const response = await Data.sendPrompt(prompt);
        
        if (response &amp;&amp; response.content) {
          UI.showModal(response.content);
          UI.showToast('ì‘ë‹µì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
          promptInput.value = ''; // ì…ë ¥ í•„ë“œ í´ë¦¬ì–´
        } else {
          throw new Error('ì‘ë‹µ ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        }
        
      } finally {
        // UI ì¬í™œì„±í™”
        this.setSubmitButtonState(true);
      }
      
    } catch (error) {
      console.error('[EVENTS] í”„ë¡¬í”„íŠ¸ ì „ì†¡ ì²˜ë¦¬ ì‹¤íŒ¨:', error);
      GlobalState.ErrorHandler.handleError(error, {
        module: 'events',
        function: 'handleSendPrompt',
        context: 'prompt_submission',
        severity: 'error',
        userMessage: 'í”„ë¡¬í”„íŠ¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.'
      });
      
      // UI ì¬í™œì„±í™”
      this.setSubmitButtonState(true);
    }
  },

  /**
   * ì „ì†¡ ë²„íŠ¼ ìƒíƒœ ì„¤ì •
   * 
   * í”„ë¡¬í”„íŠ¸ ì²˜ë¦¬ ì¤‘ ë²„íŠ¼ì„ ë¹„í™œì„±í™”í•˜ê³  í…ìŠ¤íŠ¸ë¥¼ ë³€ê²½í•˜ì—¬ 
   * ì‚¬ìš©ìì—ê²Œ ì²˜ë¦¬ ìƒíƒœë¥¼ ëª…í™•íˆ ì „ë‹¬í•©ë‹ˆë‹¤.
   * 
   * @param {boolean} enabled - ë²„íŠ¼ í™œì„±í™” ì—¬ë¶€ (true: í™œì„±í™”, false: ë¹„í™œì„±í™”)
   * 
   * @example
   * // ì²˜ë¦¬ ì‹œì‘ ì‹œ ë²„íŠ¼ ë¹„í™œì„±í™”
   * Events.setSubmitButtonState(false);
   * 
   * // ì²˜ë¦¬ ì™„ë£Œ ì‹œ ë²„íŠ¼ ì¬í™œì„±í™”
   * Events.setSubmitButtonState(true);
   */
  setSubmitButtonState(enabled) {
    try {
      const submitButton = UI.safeGetElement('#submit-prompt');
      if (submitButton) {
        submitButton.disabled = !enabled;
        submitButton.textContent = enabled ? 'ì „ì†¡' : 'ì²˜ë¦¬ ì¤‘...';
      }
    } catch (error) {
      console.error('[EVENTS] ë²„íŠ¼ ìƒíƒœ ì„¤ì • ì˜¤ë¥˜:', error);
    }
  },

  /**
   * ëª¨ë‹¬ ì°½ ë‹«ê¸° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
   * 
   * ì‚¬ìš©ìê°€ ëª¨ë‹¬ ì°½ì„ ë‹«ê¸° ë²„íŠ¼ì´ë‚˜ ë°°ê²½ í´ë¦­ìœ¼ë¡œ ë‹«ì„ ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.
   * ì•ˆì „í•œ DOM ì¡°ì‘ê³¼ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
   * 
   * @param {Event} event - í´ë¦­ ì´ë²¤íŠ¸ ê°ì²´
   * 
   * @example
   * // ë‹«ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ
   * Events.handleCloseModal(clickEvent);
   * 
   * // ë°°ê²½ í´ë¦­ ì‹œ
   * Events.handleCloseModal(backgroundClickEvent);
   */
  handleCloseModal(event) {
    try {
      if (event) {
        event.preventDefault();
      }
      
      console.log('[EVENTS] ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬');
      
      const modal = UI.safeGetElement('#response-modal');
      if (modal) {
        modal.style.display = 'none';
        console.log('[EVENTS] ëª¨ë‹¬ ë‹«ê¸° ì™„ë£Œ');
      }
      
    } catch (error) {
      console.error('[EVENTS] ëª¨ë‹¬ ë‹«ê¸° ì²˜ë¦¬ ì‹¤íŒ¨:', error);
      GlobalState.ErrorHandler.handleError(error, {
        module: 'events',
        function: 'handleCloseModal',
        context: 'modal_close',
        severity: 'warning',
        userMessage: 'ëª¨ë‹¬ ì°½ì„ ë‹«ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
      });
    }
  },

  /**
   * ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
   * 
   * ì•± ì´ˆê¸°í™” ì‹œ í•„ìš”í•œ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
   * ê° DOM ìš”ì†Œì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ì•ˆì „í•˜ê²Œ ì´ë²¤íŠ¸ë¥¼ ë°”ì¸ë”©í•©ë‹ˆë‹¤.
   * 
   * ë“±ë¡ë˜ëŠ” ì´ë²¤íŠ¸:
   * - í”„ë¡¬í”„íŠ¸ ì „ì†¡ ë²„íŠ¼ í´ë¦­
   * - ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼ í´ë¦­
   * - ëª¨ë‹¬ ë°°ê²½ í´ë¦­ (ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ìœ¼ë¡œ ë‹«ê¸°)
   * - Enter í‚¤ ì…ë ¥ (Shift+EnterëŠ” ì œì™¸, ì¤„ë°”ê¿ˆ í—ˆìš©)
   * 
   * @returns {void}
   * 
   * @example
   * // ì•± ì´ˆê¸°í™” ì‹œ í˜¸ì¶œ
   * Events.setupEventListeners();
   */
  setupEventListeners() {
    try {
      console.log('[EVENTS] ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì‹œì‘');
      
      // í”„ë¡¬í”„íŠ¸ ì „ì†¡ ë²„íŠ¼
      const submitButton = UI.safeGetElement('#submit-prompt');
      if (submitButton) {
        submitButton.addEventListener('click', (e) => this.handleSendPrompt(e));
        console.log('[EVENTS] ì „ì†¡ ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡ ì™„ë£Œ');
      } else {
        console.warn('[EVENTS] ì „ì†¡ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
      }

      // ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼
      const closeButton = UI.safeGetElement('#close-modal');
      if (closeButton) {
        closeButton.addEventListener('click', (e) => this.handleCloseModal(e));
        console.log('[EVENTS] ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡ ì™„ë£Œ');
      }

      // ëª¨ë‹¬ ë°°ê²½ í´ë¦­
      const modal = UI.safeGetElement('#response-modal');
      if (modal) {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            this.handleCloseModal(e);
          }
        });
        console.log('[EVENTS] ëª¨ë‹¬ ë°°ê²½ í´ë¦­ ì´ë²¤íŠ¸ ë“±ë¡ ì™„ë£Œ');
      }

      // Enter í‚¤ ì²˜ë¦¬
      const promptInput = UI.safeGetElement('#prompt-input');
      if (promptInput) {
        promptInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter' &amp;&amp; !e.shiftKey) {
            e.preventDefault();
            this.handleSendPrompt(e);
          }
        });
        console.log('[EVENTS] í”„ë¡¬í”„íŠ¸ ì…ë ¥ í‚¤ ì´ë²¤íŠ¸ ë“±ë¡ ì™„ë£Œ');
      }
      
      console.log('[EVENTS] ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
      
    } catch (error) {
      console.error('[EVENTS] ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì‹¤íŒ¨:', error);
      GlobalState.ErrorHandler.handleError(error, {
        module: 'events',
        function: 'setupEventListeners',
        context: 'event_listener_setup',
        severity: 'critical',
        userMessage: 'ì´ë²¤íŠ¸ ì²˜ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ ì£¼ì„¸ìš”.'
      });
    }
  },

  /**
   * íƒ­ ì´ë²¤íŠ¸ ì„¤ì •
   * 
   * ê° íƒ­(ìœ ì‚¬ í‹°ì¼“, ì¶”ì²œ í•´ê²°ì±…, Copilot)ì˜ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•˜ê³ 
   * íƒ­ë³„ ì»¨í…ì¸  ë¡œë”© í•¨ìˆ˜ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
   * 
   * @param {Object} client - Freshdesk client ê°ì²´
   * 
   * @example
   * Events.setupTabEvents(app.client);
   */
  setupTabEvents(client) {
    const tabs = document.querySelectorAll('[role="tab"]');
    tabs.forEach((tab) => {
      tab.addEventListener("click", function () {
        const tabId = this.id;
        const targetPanel = this.getAttribute("data-bs-target").substring(1);

        console.log(`ğŸ“‚ íƒ­ í´ë¦­: ${tabId} targeting panel: ${targetPanel}`);

        // íƒ­ì— ë”°ë¥¸ ì ì ˆí•œ í•¨ìˆ˜ í˜¸ì¶œ
        switch (tabId) {
          case "similar-tickets-tab":
            handleSimilarTicketsTab(client);
            break;
          case "suggested-solutions-tab":
            handleSuggestedSolutionsTab(client);
            break;
          case "copilot-tab":
            handleCopilotTab(client);
            break;
        }
      });
    });

    // ê° íƒ­ì˜ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì •
    setupSimilarTicketsEvents(client);
    setupSuggestedSolutionsEvents(client);
    setupCopilotEvents(client);
  },

  // ìœ ì‚¬ í‹°ì¼“ íƒ­ ì²˜ë¦¬ í•¨ìˆ˜
  async handleSimilarTicketsTab(client) {
    console.log("ğŸ” ìœ ì‚¬ í‹°ì¼“ íƒ­ í™œì„±í™”");

    // ë¦¬ìŠ¤íŠ¸ ë·°ë¡œ ì´ˆê¸°í™”
    showSimilarTicketsListView();

    try {
      // í˜„ì¬ í‹°ì¼“ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
      const ticketData = await client.data.get("ticket");

      if (ticketData &amp;&amp; ticketData.ticket) {
        const ticket = ticketData.ticket;

        // ìºì‹œëœ ë°ì´í„°ê°€ ìˆê³  ê°™ì€ í‹°ì¼“ì¸ ê²½ìš° ì¬ì‚¬ìš©
        if (
          globalTicketData.cached_ticket_id === ticket.id &amp;&amp;
          globalTicketData.similar_tickets.length > 0
        ) {
          console.log("ğŸ”„ ìºì‹œëœ ìœ ì‚¬ í‹°ì¼“ ë°ì´í„° ì‚¬ìš©");
          displaySimilarTickets(globalTicketData.similar_tickets);
        } else {
          // ìºì‹œëœ ë°ì´í„°ê°€ ì—†ê±°ë‚˜ ë‹¤ë¥¸ í‹°ì¼“ì¸ ê²½ìš° ë°±ì—”ë“œì—ì„œ ë¡œë“œ
          await loadSimilarTicketsFromBackend(ticket);
        }
      }
    } catch (error) {
      console.error("âŒ ìœ ì‚¬ í‹°ì¼“ ë¡œë“œ ì˜¤ë¥˜:", error);
      showErrorInResultsInResults(
        "ìœ ì‚¬ í‹°ì¼“ì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
        "similar-tickets-list"
      );
    }
  },

  // ìœ ì‚¬ í‹°ì¼“ ì´ë²¤íŠ¸ ì„¤ì • í•¨ìˆ˜
  setupSimilarTicketsEvents(client) {
    // ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ - ê³µí†µ í•¨ìˆ˜ ì‚¬ìš©
    this.setupRefreshButton(
      "refresh-similar-tickets", 
      "similar_tickets", 
      API.loadSimilarTicketsFromBackend, 
      client
    );

    // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ - ê³µí†µ í•¨ìˆ˜ ì‚¬ìš©
    this.setupBackButton("back-to-similar-list", UI.showSimilarTicketsListView);

    // í‹°ì¼“ ì—´ê¸° ë²„íŠ¼
    const openTicketButton = document.getElementById("open-ticket-link");
    if (openTicketButton) {
      openTicketButton.addEventListener("click", () => {
        const currentTicketId = openTicketButton.dataset.ticketId;
        if (currentTicketId) {
          window.open(
            `https://${window.location.host}/a/tickets/${currentTicketId}`,
            "_blank"
          );
        }
      });
    }
  },

  // ì¶”ì²œ í•´ê²°ì±… íƒ­ ì²˜ë¦¬ í•¨ìˆ˜
  async handleSuggestedSolutionsTab(client) {
    console.log("ğŸ’¡ ì¶”ì²œ ì†”ë£¨ì…˜ íƒ­ í™œì„±í™”");

    // ë¦¬ìŠ¤íŠ¸ ë·°ë¡œ ì´ˆê¸°í™”
    showSuggestedSolutionsListView();

    try {
      // í˜„ì¬ í‹°ì¼“ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
      const ticketData = await client.data.get("ticket");

      if (ticketData &amp;&amp; ticketData.ticket) {
        const ticket = ticketData.ticket;

        // ìºì‹œëœ ë°ì´í„°ê°€ ìˆê³  ê°™ì€ í‹°ì¼“ì¸ ê²½ìš° ì¬ì‚¬ìš©
        if (
          globalTicketData.cached_ticket_id === ticket.id &amp;&amp;
          globalTicketData.recommended_solutions.length > 0
        ) {
          console.log("ğŸ”„ ìºì‹œëœ ì¶”ì²œ ì†”ë£¨ì…˜ ë°ì´í„° ì‚¬ìš©");
          displaySuggestedSolutions(globalTicketData.recommended_solutions);
        } else {
          // ìºì‹œëœ ë°ì´í„°ê°€ ì—†ê±°ë‚˜ ë‹¤ë¥¸ í‹°ì¼“ì¸ ê²½ìš° ë°±ì—”ë“œì—ì„œ ë¡œë“œ
          await loadSuggestedSolutions(ticket);
        }
      }
    } catch (error) {
      console.error("âŒ ì¶”ì²œ í•´ê²°ì±… ë¡œë“œ ì˜¤ë¥˜:", error);
      showErrorInResultsInResults(
        "ì¶”ì²œ í•´ê²°ì±…ì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
        "suggested-solutions-list"
      );
    }
  },

  // ì¶”ì²œ ì†”ë£¨ì…˜ ì´ë²¤íŠ¸ ì„¤ì • í•¨ìˆ˜
  setupSuggestedSolutionsEvents(client) {
    // ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ - ê³µí†µ í•¨ìˆ˜ ì‚¬ìš©
    this.setupRefreshButton(
      "refresh-solutions", 
      "recommended_solutions", 
      Data.loadSuggestedSolutions, 
      client
    );

    // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ - ê³µí†µ í•¨ìˆ˜ ì‚¬ìš©
    this.setupBackButton("back-to-solutions-list", UI.showSuggestedSolutionsListView);

    // ì†”ë£¨ì…˜ ì‚¬ìš© ë²„íŠ¼
    const useSolutionButton = document.getElementById("use-solution");
    if (useSolutionButton) {
      useSolutionButton.addEventListener("click", () => {
        const solutionData = useSolutionButton.dataset.solution;
        if (solutionData) {
          try {
            const solution = JSON.parse(solutionData);
            UI.insertSolutionToReply(solution);
          } catch (error) {
            console.error("âŒ ì†”ë£¨ì…˜ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜:", error);
          }
        }
      });
    }
  },

  // ì½”íŒŒì¼ëŸ¿ íƒ­ ì²˜ë¦¬ í•¨ìˆ˜
  handleCopilotTab(client) {
    console.log("ğŸ¤– ì½”íŒŒì¼ëŸ¿ íƒ­ í™œì„±í™”");

    // ì½”íŒŒì¼ëŸ¿ ì´ë²¤íŠ¸ê°€ ì´ë¯¸ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ì„¤ì •
    if (!window.copilotEventsSetup) {
      setupCopilotEvents(client);
      window.copilotEventsSetup = true;
    }
  },

  // ì½”íŒŒì¼ëŸ¿ ì´ë²¤íŠ¸ ì„¤ì • í•¨ìˆ˜
  setupCopilotEvents(client) {
    const searchButton = document.getElementById("chat-search-button");
    const searchInput = document.getElementById("chat-input");
    const clearChatButton = document.getElementById("clear-chat");

    if (searchButton) {
      searchButton.addEventListener("click", async function () {
        const query = searchInput.value.trim();

        // ì„ íƒëœ ì½˜í…ì¸  íƒ€ì… ê°€ì ¸ì˜¤ê¸°
        const selectedTypes = [];
        if (document.getElementById("search-tickets")?.checked)
          selectedTypes.push("tickets");
        if (document.getElementById("search-solutions")?.checked)
          selectedTypes.push("solutions");
        if (document.getElementById("search-images")?.checked)
          selectedTypes.push("images");
        if (document.getElementById("search-attachments")?.checked)
          selectedTypes.push("attachments");

        if (query) {
          console.log("ğŸ¤– ì½”íŒŒì¼ëŸ¿ ê²€ìƒ‰ ì‹¤í–‰:", query, "íƒ€ì…:", selectedTypes);
          await performCopilotSearch(client, query, selectedTypes);

          // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
          searchInput.value = "";
        } else {
          showErrorInResultsInResults("ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.", "chat-messages");
        }
      });
    }

    // Enter í‚¤ ì§€ì›
    if (searchInput) {
      searchInput.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          e.preventDefault();
          searchButton.click();
        }
      });
    }

    // ì±„íŒ… ì´ˆê¸°í™” ë²„íŠ¼
    if (clearChatButton) {
      clearChatButton.addEventListener("click", function () {
        const chatMessages = document.getElementById("chat-messages");
        if (chatMessages) {
          chatMessages.innerHTML = `
            &lt;div class="chat-message assistant">
              &lt;strong>AI:&lt;/strong> ì•ˆë…•í•˜ì„¸ìš”! ì´ í‹°ì¼“ì— ëŒ€í•´ ì–´ë–¤ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?
            &lt;/div>
          `;
        }
        console.log("ğŸ§¹ ì±„íŒ… ê¸°ë¡ ì´ˆê¸°í™”");
      });
    }
  },

  // ì½”íŒŒì¼ëŸ¿ ê²€ìƒ‰ ì‹¤í–‰ í•¨ìˆ˜
  async performCopilotSearch(client, query, contentTypes) {
    const resultsElement = document.getElementById("chat-messages");
    if (!resultsElement) return;

    // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
    const userMessage = document.createElement("div");
    userMessage.className = "chat-message user";
    userMessage.innerHTML = `&lt;strong>ì§ˆë¬¸:&lt;/strong> ${query}`;
    resultsElement.appendChild(userMessage);

    // ë¡œë”© ë©”ì‹œì§€ ì¶”ê°€
    const loadingMessage = document.createElement("div");
    loadingMessage.className = "chat-message assistant";
    loadingMessage.innerHTML =
      '&lt;div class="loading">&lt;div class="spinner">&lt;/div>&lt;span>AIê°€ ë‹µë³€ì„ ìƒì„±í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤...&lt;/span>&lt;/div>';
    resultsElement.appendChild(loadingMessage);

    // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ
    resultsElement.scrollTop = resultsElement.scrollHeight;

    try {
      // í˜„ì¬ í‹°ì¼“ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      const ticketData = await client.data.get("ticket");

      const requestData = {
        intent: "search",
        type: contentTypes,
        query: query,
        ticket_id: ticketData?.ticket?.id || null,
      };

      // FDKë¥¼ í†µí•œ ë°±ì—”ë“œ /query API í˜¸ì¶œ (POST ë©”ì„œë“œë¡œ ë°ì´í„° ì „ì†¡)
      const response = await callBackendAPI(client, "query", requestData, "POST");

      // ë¡œë”© ë©”ì‹œì§€ ì œê±°
      resultsElement.removeChild(loadingMessage);

      if (response.ok) {
        const data = response.data;
        displayCopilotResults(data, resultsElement);
      } else {
        console.error("âŒ ì½”íŒŒì¼ëŸ¿ API ì‘ë‹µ ì˜¤ë¥˜:", response.status);
        const errorMessage = document.createElement("div");
        errorMessage.className = "chat-message assistant";
        errorMessage.innerHTML =
          "&lt;strong>ì˜¤ë¥˜:&lt;/strong> AI ì‘ë‹µì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        resultsElement.appendChild(errorMessage);
      }
    } catch (error) {
      console.error("âŒ ì½”íŒŒì¼ëŸ¿ ì—°ê²° ì˜¤ë¥˜:", error);
      // ë¡œë”© ë©”ì‹œì§€ ì œê±°
      if (resultsElement.contains(loadingMessage)) {
        resultsElement.removeChild(loadingMessage);
      }

      const errorMessage = document.createElement("div");
      errorMessage.className = "chat-message assistant";
      errorMessage.innerHTML =
        "&lt;strong>ì˜¤ë¥˜:&lt;/strong> AI ì„œë¹„ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
      resultsElement.appendChild(errorMessage);
    }

    // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ
    resultsElement.scrollTop = resultsElement.scrollHeight;
  },

  // ì½”íŒŒì¼ëŸ¿ ì»¨í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
  async getCopilotContext(client) {
    try {
      const ticketData = await client.data.get("ticket");
      return {
        ticket: ticketData.ticket,
        timestamp: new Date().toISOString(),
      };
    } catch (error) {
      console.error("âŒ ì»¨í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:", error);
      return {};
    }
  },

  // ì½”íŒŒì¼ëŸ¿ ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
  displayCopilotResults(data, resultsElement) {
    if (!resultsElement)
      resultsElement = document.getElementById("chat-messages");
    if (!resultsElement) return;

    const assistantMessage = document.createElement("div");
    assistantMessage.className = "chat-message assistant";

    if (data.answer || data.response) {
      let content = `&lt;strong>AI ë‹µë³€:&lt;/strong>&lt;br>${
        data.answer || data.response
      }`;

      // ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆëŠ” ê²½ìš° ì¶”ê°€ í‘œì‹œ
      if (data.results &amp;&amp; data.results.length > 0) {
        content += "&lt;br>&lt;br>&lt;strong>ê´€ë ¨ ì •ë³´:&lt;/strong>&lt;ul>";
        data.results.forEach((result, index) => {
          if (index &lt; 3) {
            // ìƒìœ„ 3ê°œë§Œ í‘œì‹œ
            content += `&lt;li>&lt;strong>${
              result.title || result.subject || `í•­ëª© ${index + 1}`
            }&lt;/strong>&lt;br>
                     &lt;small>${
                       result.excerpt || result.description || "ë‚´ìš© ì—†ìŒ"
                     }&lt;/small>&lt;/li>`;
          }
        });
        content += "&lt;/ul>";
      }

      // ì°¸ê³  ìë£Œê°€ ìˆëŠ” ê²½ìš°
      if (data.sources &amp;&amp; data.sources.length > 0) {
        content += "&lt;br>&lt;strong>ì°¸ê³  ìë£Œ:&lt;/strong>&lt;ul>";
        data.sources.forEach((source) => {
          content += `&lt;li>&lt;a href="${source.url}" target="_blank">${source.title}&lt;/a>&lt;/li>`;
        });
        content += "&lt;/ul>";
      }

      assistantMessage.innerHTML = content;
    } else {
      assistantMessage.innerHTML =
        "&lt;strong>AI:&lt;/strong> ì£„ì†¡í•©ë‹ˆë‹¤. ë‹µë³€ì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
    }

    resultsElement.appendChild(assistantMessage);

    // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ
    resultsElement.scrollTop = resultsElement.scrollHeight;

    console.log("âœ… ì½”íŒŒì¼ëŸ¿ ê²°ê³¼ í‘œì‹œ ì™„ë£Œ");
  },

  /**
   * ê³µí†µ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì •
   * 
   * ê° íƒ­ì˜ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì— ê³µí†µ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
   * ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¡œë“œí•˜ê³  UIë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
   * 
   * @param {string} buttonId - ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì˜ DOM ID
   * @param {string} dataType - ë¡œë“œí•  ë°ì´í„° íƒ€ì… (ìºì‹œ í‚¤)
   * @param {Function} loadFunction - ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
   * @param {Object} client - Freshdesk client ê°ì²´
   */
  setupRefreshButton(buttonId, dataType, loadFunction, client) {
    const refreshButton = document.getElementById(buttonId);
    if (refreshButton) {
      refreshButton.addEventListener("click", async () => {
        console.log(`ğŸ”„ ${dataType} ìƒˆë¡œê³ ì¹¨ - ìºì‹œ ì´ˆê¸°í™”`);
        
        try {
          const ticketData = await client.data.get("ticket");
          if (ticketData &amp;&amp; ticketData.ticket) {
            // ìºì‹œì—ì„œ í•´ë‹¹ ë°ì´í„° íƒ€ì…ë§Œ ì´ˆê¸°í™”
            const globalData = GlobalState.getGlobalTicketData();
            if (globalData[dataType]) {
              globalData[dataType] = [];
              GlobalState.updateGlobalTicketData(globalData);
            }
            
            // ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
            await loadFunction(ticketData.ticket);
          }
        } catch (error) {
          console.error(`âŒ ${dataType} ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:`, error);
          GlobalState.ErrorHandler.handleError(error, {
            context: `refresh_${dataType}`,
            userMessage: 'ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
          });
        }
      });
    }
  },

  /**
   * ê³µí†µ ë’¤ë¡œê°€ê¸° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
   * ì¤‘ë³µë˜ëŠ” ë’¤ë¡œê°€ê¸° ë¡œì§ì„ í†µí•©í•˜ì—¬ ì½”ë“œ ì¬ì‚¬ìš©ì„±ì„ ë†’ì…ë‹ˆë‹¤.
   * @param {string} buttonId - ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ID
   * @param {Function} showListFunction - ëª©ë¡ì„ ë³´ì—¬ì¤„ í•¨ìˆ˜
   */
  setupBackButton(buttonId, showListFunction) {
    const backButton = document.getElementById(buttonId);
    if (backButton) {
      backButton.addEventListener("click", () => {
        try {
          showListFunction();
        } catch (error) {
          console.error(`âŒ ë’¤ë¡œê°€ê¸° ì²˜ë¦¬ ì‹¤íŒ¨ (${buttonId}):`, error);
          GlobalState.ErrorHandler.handleError(error, {
            context: 'navigation_back',
            userMessage: 'í™”ë©´ ì´ë™ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
          });
        }
      });
    }
  },

  /**
   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ìµœì í™” ê´€ë¦¬
   */
  eventListeners: new Map(),
  
  /**
   * ìµœì í™”ëœ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
   * ìë™ ì •ë¦¬ ë° ì¤‘ë³µ ë°©ì§€ ê¸°ëŠ¥ í¬í•¨
   */
  addOptimizedEventListener(element, eventType, handler, options = {}) {
      const { 
          debounce = false, 
          throttle = false, 
          once = false,
          passive = true 
      } = options;
      
      let optimizedHandler = handler;
      
      // ë””ë°”ìš´ìŠ¤ ì ìš©
      if (debounce) {
          const delay = typeof debounce === 'number' ? debounce : 300;
          optimizedHandler = window.PerformanceOptimizer.debounce(handler, delay);
      }
      
      // ìŠ¤ë¡œí‹€ ì ìš©
      if (throttle) {
          const limit = typeof throttle === 'number' ? throttle : 100;
          optimizedHandler = window.PerformanceOptimizer.throttle(handler, limit);
      }
      
      const listenerKey = `${element.id || 'unnamed'}-${eventType}`;
      
      // ê¸°ì¡´ ë¦¬ìŠ¤ë„ˆ ì œê±° (ì¤‘ë³µ ë°©ì§€)
      if (this.eventListeners.has(listenerKey)) {
          const oldListener = this.eventListeners.get(listenerKey);
          element.removeEventListener(eventType, oldListener.handler);
      }
      
      // ìƒˆ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
      const listenerOptions = { once, passive, ...options };
      element.addEventListener(eventType, optimizedHandler, listenerOptions);
      
      // ë¦¬ìŠ¤ë„ˆ ì¶”ì 
      this.eventListeners.set(listenerKey, {
          element,
          eventType,
          handler: optimizedHandler,
          options: listenerOptions
      });
      
      console.log(`[ì´ë²¤íŠ¸] ìµœì í™”ëœ ë¦¬ìŠ¤ë„ˆ ë“±ë¡: ${listenerKey}`);
  },

  /**
   * ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬
   */
  cleanupEventListeners() {
      for (const [key, listener] of this.eventListeners.entries()) {
          try {
              listener.element.removeEventListener(listener.eventType, listener.handler);
          } catch (error) {
              console.warn(`[ì´ë²¤íŠ¸] ë¦¬ìŠ¤ë„ˆ ì œê±° ì‹¤íŒ¨: ${key}`, error);
          }
      }
      this.eventListeners.clear();
      console.log('[ì´ë²¤íŠ¸] ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
  },

  /**
   * ì´ë²¤íŠ¸ ìœ„ì„ ì„¤ì •
   * ë™ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ìš”ì†Œì— ëŒ€í•œ íš¨ìœ¨ì ì¸ ì´ë²¤íŠ¸ ì²˜ë¦¬
   */
  setupEventDelegation(container, selector, eventType, handler, options = {}) {
      const delegatedHandler = (e) => {
          const target = e.target.closest(selector);
          if (target) {
              handler.call(target, e);
          }
      };
      
      this.addOptimizedEventListener(container, eventType, delegatedHandler, options);
  },

  /**
   * í–¥ìƒëœ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ ì„¤ì •
   */
  setupOptimizedRefreshButton() {
      const refreshBtn = this.getDOMElement('#refresh-btn');
      if (!refreshBtn) {
          console.warn('[ì´ë²¤íŠ¸] ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
          return;
      }

      this.addOptimizedEventListener(refreshBtn, 'click', async (e) => {
          e.preventDefault();
          
          try {
              // ë²„íŠ¼ ë¹„í™œì„±í™”ë¡œ ì¤‘ë³µ í´ë¦­ ë°©ì§€
              refreshBtn.disabled = true;
              refreshBtn.textContent = 'ìƒˆë¡œê³ ì¹¨ ì¤‘...';
              
              // ìºì‹œ ë¬´íš¨í™” ë° ë°ì´í„° ê°±ì‹ 
              if (window.API) {
                  window.API.clearCache();
              }
              
              // ê¸€ë¡œë²Œ ë°ì´í„° ì´ˆê¸°í™”
              window.GlobalState.resetGlobalTicketCache();
              
              // UI ìƒˆë¡œê³ ì¹¨
              if (window.UI) {
                  await window.UI.refreshMainView();
              }
              
              console.log('[ì´ë²¤íŠ¸] ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì™„ë£Œ');
              
          } catch (error) {
              window.ErrorHandler.handleError(error, {
                  context: 'refresh_button',
                  userMessage: 'ë°ì´í„° ìƒˆë¡œê³ ì¹¨ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
              });
          } finally {
              // ë²„íŠ¼ ë³µì›
              refreshBtn.disabled = false;
              refreshBtn.textContent = 'ìƒˆë¡œê³ ì¹¨';
          }
      }, { 
          debounce: 1000 // 1ì´ˆ ë””ë°”ìš´ìŠ¤ë¡œ ì¤‘ë³µ í´ë¦­ ë°©ì§€
      });
  },

  /**
   * ìµœì í™”ëœ ê²€ìƒ‰ ì…ë ¥ í•„ë“œ ì„¤ì •
   */
  setupOptimizedSearchInput() {
      const searchInput = this.getDOMElement('#search-input');
      if (!searchInput) return;
      
      // ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰ ì„¤ì •
      if (window.UI &amp;&amp; window.UI.setupSmartSearch) {
        window.UI.setupSmartSearch(searchInput, async (query) => {
          if (window.Data &amp;&amp; window.Data.searchTickets) {
            const results = await window.Data.searchTickets(query);
            if (window.UI &amp;&amp; window.UI.renderOptimizedTicketList) {
              const container = this.getDOMElement('#tickets-list');
              if (container) {
                await window.UI.renderOptimizedTicketList(results, container);
              }
            }
          }
        }, {
          debounceMs: 300,
          minLength: 2,
          placeholder: 'í‹°ì¼“ ê²€ìƒ‰... (ìµœì†Œ 2ê¸€ì)'
        });
      }
  },

  /**
   * ë¬´í•œ ìŠ¤í¬ë¡¤ ì„¤ì •
   */
  setupInfiniteScroll(container, loadMoreCallback, options = {}) {
      const { 
          threshold = 100, 
          debounceMs = 100,
          batchSize = 20 
      } = options;
      
      let isLoading = false;
      
      const scrollHandler = window.PerformanceOptimizer.throttle(async () => {
          if (isLoading) return;
          
          const { scrollTop, scrollHeight, clientHeight } = container;
          const distanceToBottom = scrollHeight - scrollTop - clientHeight;
          
          if (distanceToBottom &lt; threshold) {
              isLoading = true;
              
              try {
                  const hasMore = await loadMoreCallback(batchSize);
                  if (!hasMore) {
                      // ë” ì´ìƒ ë¡œë“œí•  ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ìŠ¤í¬ë¡¤ ë¦¬ìŠ¤ë„ˆ ì œê±°
                      container.removeEventListener('scroll', scrollHandler);
                  }
              } catch (error) {
                  window.ErrorHandler.handleError(error, {
                      context: 'infinite_scroll',
                      userMessage: 'ì¶”ê°€ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
                  });
              } finally {
                  isLoading = false;
              }
          }
      }, 100);
      
      this.addOptimizedEventListener(container, 'scroll', scrollHandler, { passive: true });
  },

  /**
   * í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì„¤ì •
   */
  setupKeyboardShortcuts() {
      const shortcuts = {
          'r': () => this.getDOMElement('#refresh-btn')?.click(), // Rí‚¤ë¡œ ìƒˆë¡œê³ ì¹¨
          '/': () => this.getDOMElement('#search-input')?.focus(), // /í‚¤ë¡œ ê²€ìƒ‰ í¬ì»¤ìŠ¤
          'Escape': () => {
              // ESCí‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸° ë° ê²€ìƒ‰ ì´ˆê¸°í™”
              const searchInput = this.getDOMElement('#search-input');
              if (searchInput &amp;&amp; document.activeElement === searchInput) {
                  searchInput.value = '';
                  searchInput.blur();
              }
          }
      };
      
      this.addOptimizedEventListener(document, 'keydown', (e) => {
          // ì…ë ¥ í•„ë“œì—ì„œëŠ” ë‹¨ì¶•í‚¤ ë¹„í™œì„±í™”
          if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
              if (e.key !== 'Escape') return;
          }
          
          const handler = shortcuts[e.key];
          if (handler) {
              e.preventDefault();
              handler();
          }
      });
  },

  /**
   * ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì´ë²¤íŠ¸ ì„¤ì •
   */
  setupPerformanceMonitoring() {
      // í˜ì´ì§€ ê°€ì‹œì„± ë³€ê²½ ê°ì§€
      this.addOptimizedEventListener(document, 'visibilitychange', () => {
          if (document.hidden) {
              console.log('[ì„±ëŠ¥] í˜ì´ì§€ê°€ ë°±ê·¸ë¼ìš´ë“œë¡œ ì´ë™');
              // ë¶ˆí•„ìš”í•œ ì‘ì—… ì¼ì‹œ ì¤‘ë‹¨
              if (window.DebugTools &amp;&amp; window.DebugTools.pausePeriodicChecks) {
                  window.DebugTools.pausePeriodicChecks();
              }
          } else {
              console.log('[ì„±ëŠ¥] í˜ì´ì§€ê°€ ë‹¤ì‹œ í™œì„±í™”ë¨');
              // ì‘ì—… ì¬ê°œ
              if (window.DebugTools &amp;&amp; window.DebugTools.resumePeriodicChecks) {
                  window.DebugTools.resumePeriodicChecks();
              }
          }
      });
      
      // ë©”ëª¨ë¦¬ ë¶€ì¡± ê²½ê³  ê°ì§€
      this.addOptimizedEventListener(window, 'beforeunload', () => {
          this.cleanupEventListeners();
          if (window.PerformanceOptimizer) {
              window.PerformanceOptimizer.performMemoryCleanup();
          }
      });
  },

  /**
   * ì˜ì¡´ì„± í™•ì¸ í•¨ìˆ˜
   * 
   * Events ëª¨ë“ˆì´ ì •ìƒì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.
   * í•„ìš”í•œ ì˜ì¡´ì„± ëª¨ë“ˆë“¤ì˜ ë¡œë“œ ìƒíƒœë¥¼ ê²€ì‚¬í•©ë‹ˆë‹¤.
   * 
   * @returns {boolean} ëª¨ë“ˆ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€
   */
  isAvailable: function() {
    try {
      const dependencies = {
        GlobalState: typeof GlobalState !== 'undefined' &amp;&amp; !!GlobalState.ErrorHandler,
        UI: typeof UI !== 'undefined' &amp;&amp; typeof UI.showToast === 'function',
        Data: typeof Data !== 'undefined' &amp;&amp; typeof Data.sendPrompt === 'function'
      };
      
      const availableDeps = Object.entries(dependencies).filter(([key, available]) => available);
      const missingDeps = Object.entries(dependencies).filter(([key, available]) => !available);
      
      if (missingDeps.length > 0) {
        console.warn('[EVENTS] ëˆ„ë½ëœ ì˜ì¡´ì„±:', missingDeps.map(([key]) => key));
      }
      
      return availableDeps.length >= 2; // ìµœì†Œ 2ê°œ ì´ìƒì˜ ì˜ì¡´ì„±ì´ ì¶©ì¡±ë˜ì–´ì•¼ í•¨
      
    } catch (error) {
      console.error('[EVENTS] ì˜ì¡´ì„± í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
      return false;
    }
  },
};

console.log('ğŸ­ Events ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ - 9ê°œ í•¨ìˆ˜ exportë¨');

// ëª¨ë“ˆ ì˜ì¡´ì„± ì‹œìŠ¤í…œì— ë“±ë¡
if (typeof ModuleDependencyManager !== 'undefined') {
  ModuleDependencyManager.registerModule('events', Object.keys(Events).length);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="global.html#API">API</a></li><li><a href="Data.html">Data</a></li><li><a href="DebugTools.html">DebugTools</a></li><li><a href="Events.html">Events</a></li><li><a href="GlobalState.html">GlobalState</a></li><li><a href="ModuleDependencyManager.html">ModuleDependencyManager</a></li><li><a href="UI.html">UI</a></li><li><a href="Utils.html">Utils</a></li></ul><h3>Global</h3><ul><li><a href="global.html#callBackendAPI">callBackendAPI</a></li><li><a href="global.html#client">client</a></li><li><a href="global.html#debugGlobalState">debugGlobalState</a></li><li><a href="global.html#extractCompanyIdFromDomain">extractCompanyIdFromDomain</a></li><li><a href="global.html#getFreshdeskConfigFromIparams">getFreshdeskConfigFromIparams</a></li><li><a href="global.html#getGlobalLoading">getGlobalLoading</a></li><li><a href="global.html#getGlobalTicketData">getGlobalTicketData</a></li><li><a href="global.html#getInitialized">getInitialized</a></li><li><a href="global.html#globalTicketData">globalTicketData</a></li><li><a href="global.html#initializeApp">initializeApp</a></li><li><a href="global.html#isGlobalDataValid">isGlobalDataValid</a></li><li><a href="global.html#isInitialized">isInitialized</a></li><li><a href="global.html#loadInitialDataFromBackend">loadInitialDataFromBackend</a></li><li><a href="global.html#loadSimilarTicketsFromBackend">loadSimilarTicketsFromBackend</a></li><li><a href="global.html#resetGlobalTicketCache">resetGlobalTicketCache</a></li><li><a href="global.html#setGlobalLoading">setGlobalLoading</a></li><li><a href="global.html#setInitialized">setInitialized</a></li><li><a href="global.html#showErrorInResults">showErrorInResults</a></li><li><a href="global.html#showLoadingInResults">showLoadingInResults</a></li><li><a href="global.html#smartDomainParsingFrontend">smartDomainParsingFrontend</a></li><li><a href="global.html#updateGlobalTicketData">updateGlobalTicketData</a></li><li><a href="global.html#validateAndInitializeApp">validateAndInitializeApp</a></li><li><a href="global.html#validateGlobalState">validateGlobalState</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Jun 16 2025 23:16:45 GMT+0900 (ëŒ€í•œë¯¼êµ­ í‘œì¤€ì‹œ)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
