<!DOCTYPE html>
<html>
<head>
  <title>Copilot Canvas</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="https://static.freshdev.io/fdk/2.0/assets/freshworks.css">
  <link rel="stylesheet" type="text/css" href="styles/styles.css">
  <script src="{{{appclient}}}"></script>
</head>
<body>
  <div class="container">
    <!-- 백엔드 초기화 상태 -->
    <div id="backend-status" class="backend-status" style="display: none;">
      <div class="status-indicator">
        <span id="status-icon">🔄</span>
        <span id="status-text">백엔드 초기화 중...</span>
      </div>
    </div>

    <!-- 상단 티켓 요약 카드 -->
    <div class="ticket-summary-card">
      <!-- 색상이 있는 그라데이션 헤더 -->
      <div class="ticket-header-gradient">
        <div class="header-content">
          <h2 id="ticket-title">티켓 로딩 중...</h2>
          <div class="ticket-number">#<span id="ticket-id">12345</span></div>
        </div>
      </div>

      <!-- 메타정보 그리드 - 2열로 변경 -->
      <div class="meta-grid">
        <div class="meta-row">
          <div class="meta-item">
            <span class="meta-label">상태</span>
            <span id="ticket-status" class="meta-value status-open">열림</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">우선순위</span>
            <span id="ticket-priority" class="meta-value priority-medium">보통</span>
          </div>
        </div>
        <div class="meta-row">
          <div class="meta-item">
            <span class="meta-label">담당자</span>
            <span id="ticket-assignee" class="meta-value">로딩 중...</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">요청자</span>
            <span id="ticket-requester" class="meta-value">로딩 중...</span>
          </div>
        </div>
        <div class="meta-row">
          <div class="meta-item">
            <span class="meta-label">채널</span>
            <span id="ticket-channel" class="meta-value">이메일</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">생성일</span>
            <span id="ticket-created" class="meta-value">로딩 중...</span>
          </div>
        </div>
      </div>

      <!-- 태그 섹션 -->
      <div class="tags-section">
        <span class="section-label">태그</span>
        <div id="ticket-tags" class="tags-container">
          <!-- 태그들이 동적으로 추가됩니다 -->
        </div>
      </div>

      <!-- Problem and Result 2열 구조 -->
      <div class="problem-result-section">
        <div class="problem-column">
          <h4>문제상황</h4>
          <div class="content-box">
            <p id="ticket-problem">사용자가 로그인을 시도할 때 오류 메시지가 표시됩니다.</p>
          </div>
          <h4>원인</h4>
          <div class="content-box">
            <p id="ticket-cause">브라우저 캐시 문제로 인한 인증 토큰 만료.</p>
          </div>
        </div>
        <div class="result-column">
          <h4>해결방안</h4>
          <div class="content-box">
            <p id="ticket-result">브라우저 캐시를 지우고 다시 로그인하도록 안내.</p>
          </div>
          <h4>처리결과</h4>
          <div class="content-box">
            <p id="ticket-actions">성공적인 로그인이 가능함을 확인.</p>
          </div>
        </div>
      </div>

      <!-- 첨부파일 섹션 -->
      <div class="attachment-section" id="attachment-section" style="display: none;">
        <h4>첨부파일</h4>
        <div id="attachments-list" class="attachments-list">
          <!-- 첨부파일들이 동적으로 추가됩니다 -->
        </div>
      </div>
    </div>

    <!-- 하단 3개 탭 (가로 배치) -->
    <div class="tabs-section">
      <div class="tabs-header">
        <button class="tab active" data-tab="similar-tickets">
          <span class="tab-icon">🎫</span>
          <span class="tab-text">Similar Tickets</span>
        </button>
        <button class="tab" data-tab="suggested-solutions">
          <span class="tab-icon">💡</span>
          <span class="tab-text">Suggested Solutions</span>
        </button>
        <button class="tab" data-tab="copilot">
          <span class="tab-icon">🤖</span>
          <span class="tab-text">Copilot</span>
        </button>
      </div>

      <!-- 1. Similar Tickets 탭 -->
      <div class="tab-content active" id="similar-tickets">
        <div class="tab-inner">
          <div id="similar-tickets-list" class="similar-tickets-list">
            <div class="loading-placeholder">
              <span class="loading-icon">🔄</span>
              <span>유사한 티켓을 검색하고 있습니다...</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 2. Suggested Solutions 탭 -->
      <div class="tab-content" id="suggested-solutions">
        <div class="tab-inner">
          <div id="solutions-list" class="solutions-list">
            <div class="loading-placeholder">
              <span class="loading-icon">🔄</span>
              <span>추천 솔루션을 검색하고 있습니다...</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 3. Copilot 탭 -->
      <div class="tab-content" id="copilot">
        <div class="tab-inner">
          <div class="copilot-interface">
            <div class="search-section">
              <h4>AI 코파일럿과 대화하기</h4>
              <div class="search-input-container">
                <input type="text" id="copilot-input" class="copilot-input" 
                       placeholder="질문을 입력하세요... (예: 이 문제의 해결 방법은?)">
                <button id="copilot-search-btn" class="copilot-btn">검색</button>
              </div>
            </div>
            
            <!-- 검색 범위 선택 -->
            <div class="search-scope-section">
              <span class="scope-label">검색 범위:</span>
              <div class="checkbox-group">
                <label class="checkbox-item">
                  <input type="checkbox" id="scope-tickets" checked>
                  <span class="checkmark"></span>
                  <span class="checkbox-text">티켓</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" id="scope-solutions" checked>
                  <span class="checkmark"></span>
                  <span class="checkbox-text">솔루션</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" id="scope-images">
                  <span class="checkmark"></span>
                  <span class="checkbox-text">이미지</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" id="scope-attachments">
                  <span class="checkmark"></span>
                  <span class="checkbox-text">첨부파일</span>
                </label>
              </div>
            </div>
            
            <!-- 검색 결과 -->
            <div id="copilot-results" class="copilot-results">
              <div class="copilot-welcome">
                <span class="welcome-icon">🤖</span>
                <p>AI 코파일럿이 도와드리겠습니다. 궁금한 것을 질문해 주세요!</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="scripts/app.js"></script>
</body>
</html>