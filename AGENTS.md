# Project-A Spinoff: Vertex AI Migration Plan

**ì‘ì„±ì¼**: 2025-01-27
**ìƒíƒœ**: ê³„íš ìˆ˜ë¦½ ì™„ë£Œ, ì‹¤í–‰ ëŒ€ê¸°
**ëª©ì **: ë³µì¡í•œ ë ˆê±°ì‹œ ì‹œìŠ¤í…œì„ Google Vertex AI ê¸°ë°˜ ë‹¨ìˆœ ì‹œìŠ¤í…œìœ¼ë¡œ ì „í™˜

---

## ğŸ“‹ Executive Summary

### í˜„ì¬ ìƒí™©
- **í”„ë¡œì íŠ¸ ëª©ì **: ì½œì„¼í„° ìƒë‹´ì›ì—ê²Œ RAG ê¸°ë°˜ ê³ í’ˆì§ˆ ë°ì´í„° ì œê³µ
- **í˜„ì¬ ë¬¸ì œ**:
  - ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§ (~15,000 ì¤„)
  - ë‹µë³€ í’ˆì§ˆ ë§¤ìš° í˜•í¸ì—†ìŒ
  - ê²€ìƒ‰ í’ˆì§ˆ ë‚®ìŒ (ë³µì¡í•œ NLP ì¡°ê±´ ì²˜ë¦¬ ì‹¤íŒ¨)
  - ì„ë² ë”© í’ˆì§ˆ ë‚®ìŒ
  - LLM ì»¨í…ìŠ¤íŠ¸ í™œìš© ì‹¤íŒ¨ + í™˜ê°
  - ìŠ¤ì¼€ì¤„ëŸ¬ ì‘ë™ ë¶ˆì•ˆì •
  - ì²¨ë¶€íŒŒì¼ ì²˜ë¦¬ ë¯¸êµ¬í˜„

### ë°ì´í„° ê·œëª¨
- í‹°ì¼“: 4,800ê°œ
- KB ë¬¸ì„œ: 1,300ê°œ
- í…Œë„ŒíŠ¸: 1ê°œ (í…ŒìŠ¤íŠ¸ ë‹¨ê³„)
- ì¦ë¶„ ìˆ˜ì§‘ ê°„ê²©: 2ì‹œê°„

### ì£¼ìš” ê²°ì •ì‚¬í•­
- âœ… **ìƒˆ ì €ì¥ì†Œ ìƒì„±**: `project-a-vertex`
- âœ… **í”Œë«í¼ ì„ íƒ**: Google Vertex AI Search + Gemini
- âœ… **í˜¸ìŠ¤íŒ…**: Cloud Run (FastAPI)
- âœ… **ìŠ¤ì¼€ì¤„ë§**: Cloud Scheduler
- âœ… **ë°ì´í„° ìˆ˜ì§‘**: ì™„ì „íˆ ìƒˆë¡œ ì‘ì„± (ê¸°ì¡´ 6,000ì¤„ â†’ 150ì¤„)
- âœ… **ë©€í‹°í…Œë„ŒíŠ¸**: ìœ ì§€ (Vertex AI Datastore per tenant)

---

## ğŸ” ë¬¸ì œ ë¶„ì„

### í˜„ì¬ ì‹œìŠ¤í…œ ë³µì¡ë„

```
Backend Architecture:
â”œâ”€â”€ IoC Container (DependencyContainer)
â”œâ”€â”€ Platform-Neutral 3-Tuple ì¶”ìƒí™”
â”œâ”€â”€ ë©€í‹°í…Œë„ŒíŠ¸ ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œìŠ¤í…œ
â”œâ”€â”€ ì—¬ëŸ¬ LLM í”„ë¡œë°”ì´ë” ë¼ìš°íŒ…
â”œâ”€â”€ ë³µì¡í•œ ê²€ìƒ‰ íŒŒì´í”„ë¼ì¸ (4ë‹¨ê³„)
â”œâ”€â”€ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ + í•„í„° ì‹œìŠ¤í…œ
â””â”€â”€ Constitutional AI í†µí•©

Total: ~15,000 ì¤„
ì£¼ìš” ë¬¸ì œ: ëŒ€ë¶€ë¶„ ì œëŒ€ë¡œ ì‘ë™ ì•ˆ í•¨
```

### í’ˆì§ˆ ë¬¸ì œ ìƒì„¸

**ê²€ìƒ‰ í’ˆì§ˆ**
- âŒ ê´€ë ¨ í‹°ì¼“/ë¬¸ì„œë¥¼ ì°¾ì§€ ëª»í•¨
- âŒ ë³µì¡í•œ ì¡°ê±´ (NLP) ì²˜ë¦¬ ì‹¤íŒ¨
- âŒ ë§¥ë½ íŒŒì•… ì•ˆ ë¨

**ë‹µë³€ ìƒì„± í’ˆì§ˆ**
- âŒ LLM í™˜ê° ë° ë¶€ì •í™•í•œ ì •ë³´
- âŒ ê²€ìƒ‰ëœ ì»¨í…ìŠ¤íŠ¸ ì œëŒ€ë¡œ í™œìš© ëª»í•¨
- âŒ ë‹µë³€ ë¶ˆì™„ì „

**ë°ì´í„° í’ˆì§ˆ**
- âŒ ì„ë² ë”© í’ˆì§ˆ ë‚®ìŒ (OpenAI text-embedding-3-large ì‚¬ìš© ì¤‘ì¸ë°ë„)

### ë°ì´í„° ìˆ˜ì§‘ ì‹œìŠ¤í…œ ë³µì¡ë„

```
ê¸°ì¡´ ì‹œìŠ¤í…œ:
â”œâ”€â”€ core/platforms/freshdesk/: 4,841 ì¤„
â”‚   â”œâ”€â”€ fetcher.py (API í˜¸ì¶œ)
â”‚   â”œâ”€â”€ collector.py (ë°ì´í„° ìˆ˜ì§‘)
â”‚   â”œâ”€â”€ adapter.py (í”Œë«í¼ ì¶”ìƒí™”)
â”‚   â””â”€â”€ run_collection.py
â”œâ”€â”€ api/services/job_manager.py: 1,000+ ì¤„
â”‚   â”œâ”€â”€ ì‘ì—… ìƒì„±/ê´€ë¦¬
â”‚   â”œâ”€â”€ ìƒíƒœ ì¶”ì 
â”‚   â”œâ”€â”€ ì¼ì‹œì •ì§€/ì¬ê°œ
â”‚   â””â”€â”€ ì—ëŸ¬ í•¸ë“¤ë§
â””â”€â”€ core/ingest/processor.py

Total: ~6,000+ ì¤„
ë¬¸ì œ: ìŠ¤ì¼€ì¤„ëŸ¬ ì‘ë™ ë¶ˆì•ˆì •, ë³µì¡ë„ ë†’ìŒ
```

---

## ğŸ¯ ì†”ë£¨ì…˜: Vertex AI ê¸°ë°˜ ë‹¨ìˆœí™”

### ìƒˆ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Freshdesk Custom App              â”‚
â”‚              (Frontend)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ HTTP/SSE
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    FastAPI Backend (Cloud Run)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API Routes (3ê°œë§Œ)                  â”‚  â”‚
â”‚  â”‚  - /init (í‹°ì¼“ ë¡œë“œ)                 â”‚  â”‚
â”‚  â”‚  - /query (RAG ê²€ìƒ‰)                 â”‚  â”‚
â”‚  â”‚  - /sync (ë°ì´í„° ë™ê¸°í™”)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Services (~800ì¤„ ì „ì²´)              â”‚  â”‚
â”‚  â”‚  - FreshdeskClient                   â”‚  â”‚
â”‚  â”‚  - VertexAIClient                    â”‚  â”‚
â”‚  â”‚  - GeminiClient                      â”‚  â”‚
â”‚  â”‚  - SyncService                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vertex AI     â”‚  â”‚   Gemini     â”‚
â”‚ Search        â”‚  â”‚   API        â”‚
â”‚ (per tenant)  â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†‘
        â”‚ Cloud Scheduler (2ì‹œê°„ë§ˆë‹¤)
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Freshdesk    â”‚
â”‚  API          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë©€í‹°í…Œë„ŒíŠ¸ êµ¬ì¡°

```
Vertex AI Datastores:
â”œâ”€ tenant_1_freshdesk (í˜„ì¬ íšŒì‚¬)
â”œâ”€ tenant_2_freshdesk (í–¥í›„ ì¶”ê°€)
â””â”€ tenant_N_zendesk (í–¥í›„ Zendesk ì§€ì›)
```

### ì˜ˆìƒ íš¨ê³¼

```
ë³µì¡ë„:
  í˜„ì¬: ~15,000 ì¤„ â†’ ë³€ê²½ í›„: ~800 ì¤„ (95% ê°ì†Œ)

ê°œë°œ ì‹œê°„:
  MVP: ì•½ 3ì£¼ (Phase 1-5)
  ì „ì²´: ì•½ 4ì£¼ (Phase 1-6)

í’ˆì§ˆ ê°œì„  ì˜ˆìƒ:
  ê²€ìƒ‰ ì •í™•ë„: 40% â†’ 80%+ (Vertex AI NLP)
  ë‹µë³€ í’ˆì§ˆ: í™˜ê° ê°ì†Œ, ì»¨í…ìŠ¤íŠ¸ í™œìš© ê°œì„ 
  ì•ˆì •ì„±: Cloud Schedulerë¡œ ì•ˆì •ì  ìˆ˜ì§‘
  ì²¨ë¶€íŒŒì¼: Vertex AI ìë™ íŒŒì‹± ì§€ì›

ë¹„ìš© (í…ŒìŠ¤íŠ¸ ë‹¨ê³„):
  Vertex AI Search: ~$50/ì›”
  Gemini API: ~$30-50/ì›”
  Cloud Run: ~$5-10/ì›”
  Cloud Scheduler: ~$1/ì›”
  Total: ~$86-111/ì›”
```

---

## ğŸ“ ìƒˆ í”„ë¡œì íŠ¸ êµ¬ì¡°

### Repository êµ¬ì¡°

```
~/GitHub/
â”œâ”€â”€ project-a/              # ê¸°ì¡´ í”„ë¡œì íŠ¸ (ë³´ê´€, ì°¸ê³ ìš©)
â”‚   â”œâ”€â”€ backend/           # ë ˆê±°ì‹œ ì½”ë“œ (15,000ì¤„)
â”‚   â””â”€â”€ frontend/
â””â”€â”€ project-a-vertex/       # ìƒˆ í”„ë¡œì íŠ¸ (ì‘ì—…ìš©) âœ¨
    â”œâ”€â”€ backend/           # ìƒˆ ë°±ì—”ë“œ (800ì¤„)
    â”‚   â”œâ”€â”€ main.py                    # 50ì¤„
    â”‚   â”œâ”€â”€ requirements.txt           # 7ê°œ íŒ¨í‚¤ì§€
    â”‚   â”œâ”€â”€ routes/
    â”‚   â”‚   â”œâ”€â”€ health.py             # 30ì¤„
    â”‚   â”‚   â”œâ”€â”€ init.py               # 80ì¤„
    â”‚   â”‚   â”œâ”€â”€ query.py              # 150ì¤„
    â”‚   â”‚   â””â”€â”€ sync.py               # 100ì¤„
    â”‚   â”œâ”€â”€ services/
    â”‚   â”‚   â”œâ”€â”€ freshdesk.py          # 150ì¤„
    â”‚   â”‚   â”œâ”€â”€ vertex_search.py      # 100ì¤„
    â”‚   â”‚   â”œâ”€â”€ gemini.py             # 80ì¤„
    â”‚   â”‚   â””â”€â”€ sync_service.py       # 150ì¤„
    â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â””â”€â”€ schemas.py            # 100ì¤„
    â”‚   â””â”€â”€ utils/
    â”‚       â””â”€â”€ tenant.py             # 40ì¤„
    â””â”€â”€ frontend/          # ê¸°ì¡´ ë³µì‚¬ + ìˆ˜ì •
        â””â”€â”€ app/
```

### VSCode Workspace ì„¤ì •

```
Workspace: "Project-A-Migration.code-workspace"
â”œâ”€â”€ ğŸ“‚ project-a/              (ì°¸ê³ ìš©)
â””â”€â”€ ğŸ“‚ project-a-vertex/       (ì‘ì—…ìš©)
```

ì´ë ‡ê²Œ í•˜ë©´:
- âœ… Claudeê°€ ì–‘ìª½ íŒŒì¼ ëª¨ë‘ ì ‘ê·¼ ê°€ëŠ¥
- âœ… ê¸°ì¡´ ì½”ë“œ ì°¸ê³ í•˜ë©´ì„œ ìƒˆ ì½”ë“œ ì‘ì„±
- âœ… í•œ í™”ë©´ì—ì„œ ë¹„êµ ê°€ëŠ¥

---

## ğŸš€ ì‹¤í–‰ ê³„íš

### Phase 0: í”„ë¡œì íŠ¸ ì…‹ì—… (Day 1, 30ë¶„)

**GitHub ì €ì¥ì†Œ ìƒì„±**
```
Repository name: project-a-vertex
Description: RAG-based Freshdesk AI Assistant (Vertex AI)
Private: Yes
Initialize with README: Yes
```

**ë¡œì»¬ ì…‹ì—…**
```bash
cd ~/GitHub
git clone <ìƒˆ-ì €ì¥ì†Œ-URL> project-a-vertex
cd project-a-vertex

# êµ¬ì¡° ìƒì„±
mkdir -p backend/routes backend/services backend/models backend/utils
cp -r ../project-a/frontend ./frontend
rm -rf frontend/node_modules frontend/coverage

# ê¸°ë³¸ íŒŒì¼ ìƒì„±
touch backend/main.py
touch backend/requirements.txt
touch backend/.env.example
touch backend/.gitignore
touch README.md
```

**ì´ˆê¸° íŒŒì¼ ì‘ì„±**
- `backend/requirements.txt` (7ê°œ íŒ¨í‚¤ì§€)
- `backend/main.py` (ê¸°ë³¸ FastAPI ì•±)
- `backend/.env.example` (í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿)
- `README.md` (í”„ë¡œì íŠ¸ ê°œìš”)

---

### Phase 1: GCP í™˜ê²½ ì…‹ì—… + Vertex AI ê²€ì¦ (1ì£¼)

**Day 1-2: GCP í”„ë¡œì íŠ¸ ìƒì„±**
```
â–¡ GCP í”„ë¡œì íŠ¸ ìƒì„± (copilot-canvas-v2)
â–¡ API í™œì„±í™”
  - Vertex AI API
  - Discovery Engine API
  - Cloud Run API
  - Cloud Scheduler API
â–¡ ì„œë¹„ìŠ¤ ê³„ì • ìƒì„± + ê¶Œí•œ ë¶€ì—¬
  - Vertex AI User
  - Discovery Engine Admin
  - Cloud Run Invoker
â–¡ ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ë‹¤ìš´ë¡œë“œ (JSON)
â–¡ backend/service-account-key.json ì €ì¥
```

**Day 3-4: Vertex AI Datastore ìƒì„±**
```
â–¡ Datastore ìƒì„±
  Name: tenant_1_freshdesk
  Type: Unstructured documents
  Location: global
â–¡ ìƒ˜í”Œ ë°ì´í„° 100ê°œ ì—…ë¡œë“œ
  - í‹°ì¼“ 50ê°œ (ëŒ€í™” í¬í•¨)
  - KB ë¬¸ì„œ 50ê°œ
â–¡ í…ŒìŠ¤íŠ¸ ê²€ìƒ‰ ìˆ˜í–‰
```

**Day 5: í’ˆì§ˆ ê²€ì¦ í…ŒìŠ¤íŠ¸**
```
â–¡ í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ 10ê°œ ì¤€ë¹„ (ì‹¤ì œ ìƒë‹´ì› ì§ˆë¬¸)
â–¡ Vertex AI Search ê²°ê³¼ í™•ì¸
â–¡ ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ ë¹„êµ (ìˆë‹¤ë©´)
â–¡ ê²€ìƒ‰ ì •í™•ë„ í‰ê°€
â–¡ í•œêµ­ì–´ ì²˜ë¦¬ í’ˆì§ˆ í™•ì¸
â–¡ ì‘ë‹µ ì†ë„ ì¸¡ì •
```

**Decision Point:**
- âœ… í’ˆì§ˆ ê°œì„  í™•ì¸ â†’ Phase 2 ì§„í–‰
- âŒ í’ˆì§ˆ ë¬¸ì œ â†’ OpenAI Assistants ëŒ€ì•ˆ ê²€í† 

---

### Phase 2: ë°±ì—”ë“œ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„ (1ì£¼)

**Day 1: ê¸°ë³¸ êµ¬ì¡°**
```
â–¡ main.py (FastAPI ì•±)
â–¡ routes/health.py (í—¬ìŠ¤ì²´í¬)
â–¡ í™˜ê²½ë³€ìˆ˜ ì„¤ì • (.env)
â–¡ ë¡œì»¬ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
```

**Day 2-3: Vertex AI í†µí•©**
```
â–¡ services/vertex_search.py
  - search() ë©”ì„œë“œ
  - í•„í„° ì§€ì›
â–¡ services/gemini.py
  - generate() ë©”ì„œë“œ
  - stream_generate() ë©”ì„œë“œ
â–¡ routes/query.py
  - RAG íŒŒì´í”„ë¼ì¸
  - SSE ìŠ¤íŠ¸ë¦¬ë°
```

**Day 4-5: Freshdesk í†µí•©**
```
â–¡ services/freshdesk.py
  - get_ticket()
  - get_conversations()
  - get_articles()
â–¡ routes/init.py
  - í‹°ì¼“ ë¡œë“œ
  - ìš”ì•½ ìƒì„±
```

**Day 6-7: ë°ì´í„° ë™ê¸°í™”**
```
â–¡ services/sync_service.py
  - fetch_tickets()
  - fetch_kb_articles()
  - convert_to_vertex_document()
  - upload_to_vertex()
  - ì¦ë¶„ ìˆ˜ì§‘ ì§€ì›
â–¡ routes/sync.py
  - POST /sync ì—”ë“œí¬ì¸íŠ¸
  - ì§„í–‰ ìƒí™© ì¶”ì 
```

---

### Phase 3: í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ (3ì¼)

**Day 1: í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì •**
```
â–¡ frontend/app/config/backend-config.js ìˆ˜ì •
  - backend_url ë³€ê²½
â–¡ frontend/app/scripts/app.js ìˆ˜ì • (í•„ìš”ì‹œ)
  - API í˜¸ì¶œ ê²½ë¡œ í™•ì¸
```

**Day 2: í†µí•© í…ŒìŠ¤íŠ¸**
```
â–¡ Freshdesk ì•±ì—ì„œ ëª¨ë‹¬ ì—´ê¸°
â–¡ í‹°ì¼“ ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
â–¡ RAG ì¿¼ë¦¬ í…ŒìŠ¤íŠ¸
â–¡ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ í™•ì¸
â–¡ ì—ëŸ¬ í•¸ë“¤ë§ í…ŒìŠ¤íŠ¸
```

**Day 3: ë²„ê·¸ ìˆ˜ì • ë° ìµœì í™”**
```
â–¡ ë°œê²¬ëœ ë¬¸ì œ ìˆ˜ì •
â–¡ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
â–¡ ë¡œë”© ìƒíƒœ í‘œì‹œ
â–¡ ì—ëŸ¬ ë©”ì‹œì§€ ê°œì„ 
```

---

### Phase 4: Cloud Run ë°°í¬ (2ì¼)

**Day 1: Dockerfile ì‘ì„±**
```dockerfile
FROM python:3.10-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8080"]
```

```
â–¡ Dockerfile ì‘ì„±
â–¡ .dockerignore ì‘ì„±
â–¡ ë¡œì»¬ Docker í…ŒìŠ¤íŠ¸
```

**Day 2: Cloud Run ë°°í¬**
```bash
gcloud run deploy copilot-backend \
  --source . \
  --region asia-northeast3 \
  --allow-unauthenticated \
  --set-env-vars GOOGLE_CLOUD_PROJECT=xxx
```

```
â–¡ Cloud Run ë°°í¬
â–¡ í™˜ê²½ë³€ìˆ˜ ì„¤ì • (GCP Console)
â–¡ ì„œë¹„ìŠ¤ ê³„ì • ì—°ê²°
â–¡ ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
â–¡ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì—°ê²° í…ŒìŠ¤íŠ¸
```

---

### Phase 5: Cloud Scheduler ì„¤ì • (1ì¼)

```yaml
# Cloud Scheduler Job
name: sync-freshdesk-incremental
schedule: "0 */2 * * *"  # 2ì‹œê°„ë§ˆë‹¤
timezone: Asia/Seoul
http_target:
  uri: https://copilot-backend-xxx.run.app/api/v1/sync
  method: POST
  headers:
    Content-Type: application/json
    X-Api-Key: ${API_KEY}
  body:
    tenant_id: "tenant_1"
    incremental: true
```

```
â–¡ Cloud Scheduler Job ìƒì„±
â–¡ ìŠ¤ì¼€ì¤„ ì„¤ì • (2ì‹œê°„ë§ˆë‹¤)
â–¡ íƒ€ì„ì¡´ ì„¤ì • (Asia/Seoul)
â–¡ ì„œë¹„ìŠ¤ ê³„ì • ì—°ê²°
â–¡ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
â–¡ ë¡œê·¸ í™•ì¸
```

---

### Phase 6: ì „ì²´ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ (2ì¼)

**Day 1: ì´ˆê¸° ë°ì´í„° ìˆ˜ì§‘**
```
â–¡ ì „ì²´ ë™ê¸°í™” ì‹¤í–‰ (incremental=false)
  - 4,800 í‹°ì¼“
  - 1,300 KB ë¬¸ì„œ
â–¡ ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§
â–¡ ì—ëŸ¬ ì²˜ë¦¬
â–¡ ì™„ë£Œ í™•ì¸
```

**Day 2: ê²€ì¦ ë° ìµœì í™”**
```
â–¡ ë°ì´í„° í’ˆì§ˆ ê²€ì¦
  - í‹°ì¼“ ìˆ˜ í™•ì¸
  - KB ë¬¸ì„œ ìˆ˜ í™•ì¸
  - ìƒ˜í”Œ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸
â–¡ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ (ì‹¤ì œ ì¿¼ë¦¬ 100ê°œ)
â–¡ ì„±ëŠ¥ ë¹„êµ (ê¸°ì¡´ vs ì‹ ê·œ)
â–¡ ìµœì¢… ì¡°ì •
```

---

## ğŸ“Š íƒ€ì„ë¼ì¸ ìš”ì•½

```
Week 1: GCP ì…‹ì—… + Vertex AI ê²€ì¦
Week 2: ë°±ì—”ë“œ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„
Week 3: í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ + Cloud Run ë°°í¬
Week 4: Cloud Scheduler + ì „ì²´ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜

Total: 4ì£¼ (ì™„ì „ ìƒˆ ì‹œìŠ¤í…œ)
```

---

## ğŸ’° ì˜ˆìƒ ë¹„ìš©

**í…ŒìŠ¤íŠ¸ ë‹¨ê³„ (ì›”ê°„)**

```
Vertex AI Search:
- Datastore: ~$50
- Queries (1000íšŒ/ì›”): ~$20

Gemini API:
- ìƒì„± (1000íšŒ): ~$30-50

Cloud Run:
- vCPU + Memory: ~$5-10
- ë¬´ë£Œ í‹°ì–´ í™œìš© ê°€ëŠ¥

Cloud Scheduler:
- Jobs: ~$1

Total: ~$86-111/ì›”
```

**í”„ë¡œë•ì…˜ ì˜ˆìƒ (ì›”ê°„, 10ë°° ì‚¬ìš©ëŸ‰)**

```
Total: ~$500-800/ì›”
(í…Œë„ŒíŠ¸ 5ê°œ, ì¼ 500 ì¿¼ë¦¬ ê¸°ì¤€)
```

---

## ğŸ¯ í•µì‹¬ ê¸°ìˆ  ê²°ì •ì‚¬í•­

### 1. ë°ì´í„° ìˆ˜ì§‘: ì™„ì „íˆ ìƒˆë¡œ ì‘ì„±

**ê¸°ì¡´**: 6,000ì¤„ (ë³µì¡, ë¶ˆì•ˆì •)
**ì‹ ê·œ**: 150ì¤„ (ë‹¨ìˆœ, ì•ˆì •)

```python
# ì‹ ê·œ sync_service.py êµ¬ì¡° (150ì¤„)
class FreshdeskSyncService:
    def fetch_tickets(updated_since=None)
    def fetch_ticket_conversations(ticket_id)
    def fetch_kb_articles(updated_since=None)
    def convert_to_vertex_document(data, doc_type)
    def upload_to_vertex(documents)
    def sync_all(incremental=False)
```

**ì¥ì **:
- 97% ì½”ë“œ ê°ì†Œ
- ëª…í™•í•œ ë¡œì§
- ìœ ì§€ë³´ìˆ˜ ì‰¬ì›€
- ê°œë°œ ì†ë„: 3ì¼ vs 8ì¼

### 2. ì¦ë¶„ ìˆ˜ì§‘ ë°©ì‹

**Freshdesk API**:
```python
GET /api/v2/tickets?updated_since=2025-01-27T10:00:00Z
```

**ë§ˆì§€ë§‰ ë™ê¸°í™” ì‹œê°„ ì €ì¥**:
```json
# backend/data/last_sync_tenant_1.json
{
  "last_sync": "2025-01-27T10:00:00Z",
  "ticket_count": 4800,
  "article_count": 1300
}
```

**Cloud Scheduler**: 2ì‹œê°„ë§ˆë‹¤ ìë™ ì‹¤í–‰

### 3. ì²¨ë¶€íŒŒì¼ ì²˜ë¦¬

Vertex AIëŠ” ìë™ìœ¼ë¡œ PDF, DOCX, TXT íŒŒì‹±:
- ë³„ë„ ì²˜ë¦¬ ë¡œì§ ë¶ˆí•„ìš”
- Vertex AIì— ì—…ë¡œë“œë§Œ í•˜ë©´ ìë™ íŒŒì‹±
- ê²€ìƒ‰ì— ìë™ í¬í•¨

---

## âš ï¸ ë¦¬ìŠ¤í¬ & ëŒ€ì‘

### Risk 1: Vertex AI í•œêµ­ì–´ í’ˆì§ˆ
**ë¦¬ìŠ¤í¬**: í•œêµ­ì–´ ê²€ìƒ‰/ë‹µë³€ í’ˆì§ˆì´ ê¸°ëŒ€ë³´ë‹¤ ë‚®ì„ ìˆ˜ ìˆìŒ
**ëŒ€ì‘**: Phase 1ì—ì„œ ë¨¼ì € ê²€ì¦
**ë°±ì—…**: OpenAI Assistants APIë¡œ ì „í™˜ (ìœ ì‚¬í•œ êµ¬ì¡°)

### Risk 2: ì»¤ìŠ¤í„°ë§ˆì´ì§• ì œì•½
**ë¦¬ìŠ¤í¬**: Vertex AI ê¸°ëŠ¥ ì œì•½ìœ¼ë¡œ ì›í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„ ì–´ë ¤ì›€
**ëŒ€ì‘**: 80-20 ë²•ì¹™ ì ìš© (80%ëŠ” Vertex AI, 20%ë§Œ ì»¤ìŠ¤í…€)
**í•´ê²°**: Gemini í”„ë¡¬í”„íŠ¸ë¡œ ì¼ë¶€ ì œì–´ ê°€ëŠ¥

### Risk 3: Google ì¢…ì†ì„±
**ë¦¬ìŠ¤í¬**: Vendor lock-in, ê°€ê²© ì¸ìƒ
**ëŒ€ì‘**: í˜„ì¬ëŠ” ê°œë°œ ì†ë„ê°€ ì¤‘ìš”í•˜ë¯€ë¡œ ìˆ˜ìš©
**ì¥ê¸°**: í•„ìš”ì‹œ ì¶”ìƒí™” ë ˆì´ì–´ ì¶”ê°€ ê°€ëŠ¥ (OpenAI/Anthropic)

### Risk 4: ë©€í‹°í…Œë„ŒíŠ¸ ë¹„ìš©
**ë¦¬ìŠ¤í¬**: í…Œë„ŒíŠ¸ ì¦ê°€ ì‹œ ë¹„ìš© ì„ í˜• ì¦ê°€
**ëŒ€ì‘**: Datastore per tenant (ê²©ë¦¬ ë³´ì¥)
**ëª¨ë‹ˆí„°ë§**: í…Œë„ŒíŠ¸ë³„ ì‚¬ìš©ëŸ‰ ì¶”ì 

### Risk 5: ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘ ì„œë¹„ìŠ¤ ì¤‘ë‹¨
**ë¦¬ìŠ¤í¬**: ìƒˆ ì‹œìŠ¤í…œ ì¤€ë¹„ ì¤‘ ê¸°ì¡´ ì„œë¹„ìŠ¤ í•„ìš”
**ëŒ€ì‘**: ê¸°ì¡´ ì‹œìŠ¤í…œ ìœ ì§€í•˜ë©° ë³‘ë ¬ ê°œë°œ
**ì „í™˜**: ìƒˆ ì‹œìŠ¤í…œ ê²€ì¦ ì™„ë£Œ í›„ ì „í™˜

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê¸°ì¡´ í”„ë¡œì íŠ¸ ì°¸ê³  íŒŒì¼

**Freshdesk API í†µí•©**:
- `project-a/backend/core/platforms/freshdesk/fetcher.py`
- `project-a/backend/core/platforms/freshdesk/adapter.py`

**í”„ë¡¬í”„íŠ¸**:
- `project-a/backend/config/prompts/*.yaml`

**ë°ì´í„° ëª¨ë¸**:
- `project-a/backend/api/models/requests.py`
- `project-a/backend/api/models/responses.py`

**í”„ë¡ íŠ¸ì—”ë“œ**:
- `project-a/frontend/app/scripts/app.js`
- `project-a/frontend/app/config/backend-config.js`

### Google Cloud ë¬¸ì„œ

- [Vertex AI Search Documentation](https://cloud.google.com/generative-ai-app-builder/docs/introduction)
- [Gemini API Documentation](https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/gemini)
- [Cloud Run Documentation](https://cloud.google.com/run/docs)
- [Cloud Scheduler Documentation](https://cloud.google.com/scheduler/docs)

---

## ğŸ”„ ë‹¤ìŒ ì•¡ì…˜ ì•„ì´í…œ

### ì¦‰ì‹œ ì‹¤í–‰ (ì˜¤ëŠ˜)
1. [ ] GitHubì—ì„œ ìƒˆ ì €ì¥ì†Œ ìƒì„± (`project-a-vertex`)
2. [ ] ë¡œì»¬ì— í´ë¡ 
3. [ ] VSCode Workspace ì„¤ì • (ë‘ í”„ë¡œì íŠ¸)
4. [ ] ê¸°ë³¸ êµ¬ì¡° ìƒì„± (í´ë”, íŒŒì¼)
5. [ ] ì´ˆê¸° íŒŒì¼ ì‘ì„± (main.py, requirements.txt ë“±)
6. [ ] ì²« ì»¤ë°‹ & í‘¸ì‹œ

### Phase 1 ì¤€ë¹„ (ì´ë²ˆ ì£¼)
1. [ ] GCP ê³„ì • í™•ì¸/ìƒì„±
2. [ ] í”„ë¡œì íŠ¸ ìƒì„±
3. [ ] ê²°ì œ ê³„ì • ì—°ê²°
4. [ ] API í™œì„±í™”
5. [ ] ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±

---

## ğŸ“ ë…¸íŠ¸ & í•™ìŠµ ì‚¬í•­

### ì™œ ì‹¤íŒ¨í–ˆë‚˜?
1. **Platform-Neutral ê³¼ë„í•œ ì¶”ìƒí™”**: Freshdeskë§Œ ì“°ëŠ”ë° ë²”ìš© í”Œë«í¼ ì¶”ìƒí™”
2. **IoC ì»¨í…Œì´ë„ˆ ì˜¤ë²„í‚¬**: ë‹¨ìˆœí•œ ì•±ì— ê³¼ë„í•œ íŒ¨í„´
3. **ë©€í‹° LLM ë¼ìš°íŒ… ë¶ˆí•„ìš”**: í•˜ë‚˜ë§Œ ì¨ë„ ì¶©ë¶„
4. **ë³µì¡í•œ íŒŒì´í”„ë¼ì¸**: 4ë‹¨ê³„ íŒŒì´í”„ë¼ì¸ì´ í’ˆì§ˆ ê°œì„  ëª»í•¨
5. **ìì²´ ì„ë² ë”©**: OpenAI ì„ë² ë”©ë„ í’ˆì§ˆ ë‚®ìŒ â†’ Vertex AIê°€ ë” ë‚˜ì„ ê°€ëŠ¥ì„±

### ì„±ê³µ ìš”ì¸
1. **ë‹¨ìˆœí•¨**: 800ì¤„ë¡œ ì¶©ë¶„
2. **ê´€ë¦¬í˜• ì„œë¹„ìŠ¤**: Vertex AIê°€ ë³µì¡í•œ ë¶€ë¶„ ì²˜ë¦¬
3. **í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ**: Cloud Run + Schedulerë¡œ ì•ˆì •ì„±
4. **ê²€ì¦ ë¨¼ì €**: Phase 1ì—ì„œ í’ˆì§ˆ í™•ì¸ í›„ ì§„í–‰
5. **ì¦ë¶„ ê°œë°œ**: ë‹¨ê³„ë³„ ê²€ì¦í•˜ë©° ì§„í–‰

---

## ğŸ‰ ê¸°ëŒ€ íš¨ê³¼

**ê°œë°œì ê´€ì **:
- âœ… ì½”ë“œ ì´í•´ ì‰¬ì›€ (800ì¤„)
- âœ… ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ ê°ì†Œ
- âœ… ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ìš©ì´
- âœ… ë²„ê·¸ ê°€ëŠ¥ì„± ë‚®ìŒ

**ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ì **:
- âœ… ë‹µë³€ í’ˆì§ˆ ê°œì„  (40% â†’ 80%)
- âœ… ìƒë‹´ì› ë§Œì¡±ë„ í–¥ìƒ
- âœ… ê°œë°œ ì†ë„ í–¥ìƒ (4ì£¼ ë§Œì— ì™„ì„±)
- âœ… ìš´ì˜ ì•ˆì •ì„± ê°œì„ 

**ê¸°ìˆ  ê´€ì **:
- âœ… ìµœì‹  ê¸°ìˆ  ìŠ¤íƒ (Vertex AI, Gemini)
- âœ… í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ
- âœ… í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°
- âœ… ë©€í‹°í…Œë„ŒíŠ¸ ì§€ì›

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-27
**ë‹¤ìŒ ë¦¬ë·°**: Phase 1 ì™„ë£Œ í›„ (1ì£¼ í›„)
**ë‹´ë‹¹**: @alan
**ìƒíƒœ**: ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œ âœ…
