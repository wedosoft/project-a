---
applyTo: "**"
---

# 🧩 Prompt Canvas 프론트엔드 탭 구성 및 UX 설계 지침

본 문서는 Freshdesk Custom App 내 Prompt Canvas의 프론트 기능 기획 초안을 정리한 것입니다. 각 탭의 목적, 동작 조건, 후속 작업 흐름을 정의합니다.

---

## 📐 전체 구조

총 4개의 탭 구성:

1. **티켓 요약**
2. **블록 기반 에디터**
3. **유사 티켓 / 추천 문서**
4. **이미지 갤러리**

> 프론트는 백엔드가 필요한 데이터를 "충분히 준비된 이후" 호출됨. 각 탭은 명시적 사용자 액션에 따라 비동기적으로 백엔드 API를 호출한다.

---

## 🧾 탭별 기능 정의

### 1. 티켓 요약 탭

- 목적: 상담사가 전체 티켓 상황을 빠르게 이해
- 호출 시점: 최초 로딩 시 1회
- 캐싱: `localStorage` 또는 메모리 캐시 활용
- UX 요소:
  - 요약 갱신 버튼(optional)
  - 요약 구조 예:
    - 고객 요약
    - 요청사항
    - 긴급도

---

### 2. 블록 기반 답변 에디터

- 초기 상태: 빈 에디터
- 기능:
  - "답변 제안" 버튼 클릭 시 → 백엔드 `/generate_reply` 호출
  - 응답은 1개 블록으로 삽입
  - 각 블록은 ✏️ 개선 요청 가능 (`rewrite_block`)
- 향후 확장:
  - 블록 템플릿 기능
  - 응답 히스토리 복구

---

### 3. 유사 티켓 / 추천 문서 탭

- 구성안:
  - 서브탭 or 좌우 분할 UI 고려
- 기능:
  - `/similar_tickets`, `/related_docs` API 호출
  - 유사도 정렬, 날짜순 정렬 옵션
  - 각 항목 클릭 시:
    - 요약 표시
    - "에디터에 삽입" 버튼 제공

---

### 4. 이미지 갤러리 탭

- 목적: 관련 시각자료 빠르게 확인 및 응답 활용
- 소스:
  - 유사 티켓 및 추천 문서의 첨부 이미지
- 기능:
  - 썸네일 + 문서 제목
  - 클릭 시 Lightbox 보기
  - "본문에 삽입" 버튼 (→ 이미지 블록 삽입)

---

## ⚙️ 관리자 설정 (iparams.html)

- 문체/톤 설정
- 금지 표현 목록
- 인삿말/마무리말 옵션
- 향후 옵션(로드맵):
  - 학습 티켓 범위 지정 (기간, 그룹 등)
  - 스타일 템플릿화

---

## 🧩 프론트 설계 원칙

- 모든 API 호출은 **명시적 트리거**만 허용 (자동 요청 최소화)
- 상태관리는 `Zustand` 또는 React Context로 전역 관리
- 탭 간 데이터 공유는 store를 통한 lazy-load 방식
- 백엔드 API 응답 포맷은 블록 기준 구조화 필요 (`block`, `summary`, `image_url` 등)
